# Introduction

**Bitmaps** are objects that store a pixel array and an accompanying [Pixel Coder](pixel-coders).
On top of that, Bitmaps have a simple interface to :
- get/set a pixel by position
- get/set a color by position
- get/set intensity by position
- clear/fill the bitmap with a pixel value

All bitmaps inherit from **`<microgl/base_bitmap.h>`** via `crpt` pattern (compile time polymorphism).
all bitmaps have the following interface through compile-time inheritance 

## Bitmap methods
```cpp
/**
 * @tparam impl implemenation type of derived class
 * @tparam pixel_coder_ the pixel coder type of the bitmap
 * @tparam buffer_element_type the type of the elements stored in the pixel array
 */
template <typename impl, typename pixel_coder_, typename buffer_element_type=typename pixel_coder_::pixel>
class base_bitmap : public crpt<impl> {
public:
    using pixel_coder = ... // pixel coder type
    using pixel = ... // pixel type
    using rgba = ... // rgba info type

    static constexpr bool hasNativeAlphaChannel()
    static constexpr bool nativeAlphaChannelBits()
    static constexpr int maxNativeAlphaChannelValue()

    int width() const
    int height() const
    int size() const
    pixel * data() // pointer to pixel array
    // get pixel coder reference
    const pixel_coder &coder() const

    int locate(int x, int y) const
    // read pixels at position
    pixel pixelAt(int x, int y) const
    pixel pixelAt(int index) const
    // write pixels at position
    void writeAt(int x, int y, const pixel &value)
    void writeAt(int index, const pixel &value)
    void fill(const pixel &value)

    // decode a pixel at position into color
    void decode(int x, int y, microgl::color::color_t &output) const
    void decode(int index, microgl::color::color_t &output) const

    // decode a pixel at position into intensity
    template <typename number>
    void decode(int x, int y, microgl::color::intensity<number> &output) const
    template <typename number>
    void decode(int index, microgl::color::intensity<number> &output) const

    // encode a color into pixel and then write it to the bitmap
    void writeColor(int index, const microgl::color::color_t &color)
    void writeColor(int x, int y, const microgl::color::color_t &color)

    // encode intensity into pixel and then write it to the bitmap
    template <typename number>
    void writeColor(int index, const microgl::color::intensity<number> &color)
    template <typename number>
    void writeColor(int x, int y, const microgl::color::intensity<number> &color)
}    
```

# Bitmaps

## Regular Bitmap
- Implemented at **`<microgl/bitmaps/bitmap.h>`**
- Example at **`/examples/example_sampler_texture.cpp`**

Regular bitmap interface

```cpp
/**
 * @tparam pixel_coder_ the pixel coder
 */
template <typename pixel_coder_>
class bitmap : public base_bitmap ....  {
public:

    // convert this bitmap to another bitmap
    template<typename CODER2>
    bitmap<CODER2> * convertToBitmap()

    // copy this bitmap to another bitmap
    template<typename CODER2>
    void copyToBitmap(bitmap<CODER2> & bmp)

    // constructors
    bitmap(int w, int h)
    bitmap(uint8_t* $pixels, int w, int h)
}
```